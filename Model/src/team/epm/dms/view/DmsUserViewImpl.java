package team.epm.dms.view;

import oracle.adf.share.ADFContext;

import oracle.jbo.Row;
import oracle.jbo.RowSetIterator;
import oracle.jbo.ViewCriteria;
import oracle.jbo.ViewCriteriaRow;
import oracle.jbo.server.ViewObjectImpl;

import team.epm.dms.view.common.DmsUserView;
// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Mon Sep 29 12:14:23 CST 2014
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class DmsUserViewImpl extends ViewObjectImpl implements DmsUserView {
    /**
     * This is the default constructor (do not remove).
     */
    public DmsUserViewImpl() {
    }
    //根据用户帐号查询用户信息
    public void queryUserByAcc(String acc){
        ViewCriteria vc= this.createViewCriteria();
        ViewCriteriaRow vcRow = vc.createViewCriteriaRow();    
        vcRow.setAttribute("Acc", "='"+acc+"'");
        vc.addElement(vcRow);
        vcRow.setAttribute("EnableFlag", "='Y'");
        vcRow.setConjunction(vcRow.VC_CONJ_AND);
        vc.addElement(vcRow);
        this.applyViewCriteria(vc);
        this.executeQuery();
        this.setApplyViewCriteriaNames(null);
    }
    //获取当前用户
    public DmsUserViewImpl queryCurUser(){
        String userId=this.getApplicationModule().getSession().getUserData().get("userId")+"";
        ViewCriteria vc= this.createViewCriteria();
        ViewCriteriaRow vcRow = vc.createViewCriteriaRow();
        vcRow.setAttribute("Id", "='"+userId+"'");
        vc.addElement(vcRow);
        this.applyViewCriteria(vc);
        this.executeQuery();
        this.setApplyViewCriteriaNames(null);
        return this;
    }
}

package team.epm.dcm.view;

import oracle.jbo.Row;
import oracle.jbo.server.DBTransaction;
import oracle.jbo.server.ViewObjectImpl;

import org.apache.commons.lang.ObjectUtils;

// ---------------------------------------------------------------------
// ---    File generated by Oracle ADF Business Components Design Time.
// ---    Wed Nov 19 11:17:09 CST 2014
// ---    Custom code may be added to this class.
// ---    Warning: Do not modify method signatures of generated methods.
// ---------------------------------------------------------------------
public class DcmTemplateViewImpl extends ViewObjectImpl {
    /**
     * This is the default constructor (do not remove).
     */
    public DcmTemplateViewImpl() {
    }

    /**
     * Returns the bind variable value for locale.
     * @return bind variable value for locale
     */
    public String getlocale() {
        return (String)getNamedWhereClauseParam("locale");
    }

    /**
     * Sets <code>value</code> for bind variable locale.
     * @param value value to bind as locale
     */
    public void setlocale(String value) {
        setNamedWhereClauseParam("locale", value);
    }
    public void removeTemplate(){
        Row row=this.getCurrentRow();
        if(row==null){
            return;
        }
        String templateId = ObjectUtils.toString(row.getAttribute("Id"));
        String clear_validate_sql="DELETE FROM DCM_TEMPLATE_VALIDATION T WHERE EXISTS(SELECT 1 FROM DCM_TEMPLATE_COLUMN C WHERE C.ID=T.COLUMN_ID AND C.TEMPLATE_ID='"+templateId+"')";
        String clear_authority_sql="DELETE FROM DCM_ROLE_TEMPLATE T WHERE T.TEMPLATE_ID='"+templateId+"'";
        String clear_combination_sql="DELETE FROM DCM_TEMPLATE_COMBINATION T WHERE T.TEMPLATE_ID='"+templateId+"'";
        String clear_column_sql="DELETE FROM DCM_TEMPLATE_COLUMN T WHERE T.TEMPLATE_ID='"+templateId+"'";
        DBTransaction trans= this.getDBTransaction();
        trans.executeCommand(clear_validate_sql);
        trans.executeCommand(clear_authority_sql);
        trans.executeCommand(clear_combination_sql);
        trans.executeCommand(clear_column_sql);
        row.remove();
        trans.commit();
    }
}
